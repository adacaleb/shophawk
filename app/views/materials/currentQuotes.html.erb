<div data-controller="material" class="card text-bg-dark" data-material-suggestions='<%= @matNames %>'>
	<%= render "/materials/quoteSubmission" %>
</br>

	<div class="row">
		<div class="col-8">
			<h1>Material currently getting quoted</h1>
		</div>
		<div class="col-2">
			<th><%= link_to "Back to Materials", "/materials", class: "btn btn-primary" %></th>
		</div>
		<div class="col-2">
			<th><%= link_to "Archive and Save All", "/materials?archive=true", class: "btn btn-outline-warning" %></th>
		</div>
	</div>
	<div>
  	<table style="table-layout:fixed" class="table table-dark align-middle table table-bordered text-center">
  		<thead>
  			<tr>
  				<th>Vendor</th>
  				<th>Price</th>
  				<th>Length (ft)</th>
  				<th>Ordered</th>
  				<th>Sawcut</th>
  				<th>Additional Costs</th>
  				<th>Comments</th>
  				<th>Archive</th>
  				<th>delete</th>
  			</tr>
  		</thead>
  		<tbody>
  			<% @qmaterials.each do |mat| %>
  			<% if mat.matquotes.count > 0 %>
	  			<tr colspan="2" class="table-light">
	  				<th><%= mat.mat %></th>
	  				<th><%= mat.size %>" Dia.</th>
	  			</tr>
	  			<% end %>
  			<% mat.matquotes.each do |history| %>
  			<% if history.ordered == true then ordered = "checked" else sawcut = "" end %>
  			<% if history.sawcut == true then sawcut = "checked" else sawcut = "" end %>
  			<tr>
			<th><%= history.vendor %></th>
			<th><%= history.price %></th>
			<th><%= history.length %></th>
			<th><input 
				data-action="click->material#orderedcheckbox" 
				class="form-check-input" 
				type="checkbox" 
				value="" 
				id="<%= history.id %>" <%= ordered %> ></th>
			<th><input 
				data-action="click->material#sawcutcheckbox" 
				class="form-check-input" 
				type="checkbox" 
				value="" 
				id="<%= history.id %>" <%= sawcut %> ></th>
			<th><%= history.additionalCost %></th>
			<th><%= history.comment %></th>
			<th><%= link_to "Archive", "/materials/currentQuotes?archiveid=#{history.id}", class: "btn btn-outline-warning" %></th>
			<th><%= button_to "Delete", history, data: { confirm: "Are you sure?" }, method: :delete, class:"btn btn-outline-danger" %></th>
			</tr>
			<% end %>
			<% end %>
  		</tbody>
  	</table>

</div>






<div class="modal fade" id="newMatModal" tabindex="-1"  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered text-white">
    <div class="modal-content" style="background-color: #034604;">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">New Material/Size</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <%= form_for(@material) do |form| %>

        <div>
          <%= form.text_field :mat, class: "form-control", placeholder: "Material" %>
        </div>
      </br>
      <div>
        <%= form.text_field :size, class: "form-control", placeholder: "Size (inches)" %>
      </div>
      </br>
      <div class="col">
        <%= form.label "Material Type", style: "display: block" %>
        <%= form.select :materialType, options_for_select([["Select One", ""], "Steel/Iron", "Stainless", "Aluminum", "Brass/Bronze", "Nylon", "Peek"]), {}, class: "form-select" %>
      </div>
    </br>
    <div>

    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
    <%= form.submit "Save" , class: "btn btn-primary" %>
  </div>
  <% end %>
</div>
</div>
</div>